---
import type MDInstance from '../types/MDInstance';
import { Icon } from 'astro-icon';

const allPosts = await Astro.glob<MDInstance>('../pages/posts/*.{md,mdx}');
const tags = new Set<string>();
allPosts.forEach((post) => {
  if (!post.frontmatter.tag) return;
  post.frontmatter.tag.forEach((t) => tags.add(t));
});
---

<div class="flex-shrink-0 mx-auto w-full lg:w-fit">
  <div class="sticky top-4 p-6 card">
    <div class="mb-6 flex flex-col items-center">
      <img src="/头像圆.webp" class="object-cover h-32 w-32 mb-2" height="128" width="128" />
      <p class="text-2xl">黎想的博客</p>
      <p class="text-base mb-6">把信拿去吧，你可以假戏真做</p>
      <div class="flex justify-around w-full mb-6">
        <div class="flex flex-col items-center">
          <p class="text-[11px]">POSTS</p>
          <p>{allPosts.length}</p>
        </div>
        <div class="flex flex-col items-center">
          <p class="text-[11px]">TAGS</p>
          <p>{Array.from(tags).length}</p>
        </div>
      </div>
      <a
        href="/rss.xml"
        class="bg-[#3273dc] hover:bg-[#276cda] w-full flex justify-center gap-2 items-center p-2 rounded-full text-neutral-50 hover:text-neutral-50 dark:hover:text-neutral-50"
      >
        <Icon name="fa:rss" size={16} class="inline-block" />
        RSS
      </a>
    </div>
  </div>
</div>
